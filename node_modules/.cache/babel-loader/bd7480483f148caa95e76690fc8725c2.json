{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Container}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../..//../components/Message/Message';import Loader from'../../../components/Loader/Loader';import{listUsers,deleteUsers}from'./../../../actions/userActions';var UserList=function UserList(_ref){var history=_ref.history;var dispatch=useDispatch();var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDelete=useSelector(function(state){return state.userDelete;});var successDelete=userDelete.success;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{history.push('/login');}},[dispatch,history,successDelete,userInfo]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure')){dispatch(deleteUsers(id));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LinkContainer,{style:{float:'right'},to:\"/register\",children:/*#__PURE__*/_jsx(Button,{className:\"mr-3 mb-3\",children:\"ADD ADMIN\"})}),/*#__PURE__*/_jsx(Container,{children:loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{style:{marginBottom:'223px'},striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"td\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"td\",{children:\"CROP SELECTION\"}),/*#__PURE__*/_jsx(\"td\",{children:\"EMAIL / NIC\"}),/*#__PURE__*/_jsx(\"td\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"td\",{children:\"EDIT / DELETE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),user.cropSelection?/*#__PURE__*/_jsx(\"td\",{children:user.cropSelection}):/*#__PURE__*/_jsx(\"td\",{style:{color:'red'},children:\"No Crop Selected\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(user.email),children:user.email})}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm mr-2\",onClick:function onClick(){return deleteHandler(user._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"})})]})]},user._id);})})]})})]});};export default UserList;","map":{"version":3,"sources":["C:/Users/hasit/Desktop/Project new new/web-cw-main/web-cw-main/frontend/src/components/DashBoard/UserList/UserList.jsx"],"names":["React","useEffect","LinkContainer","Table","Button","Container","useDispatch","useSelector","Message","Loader","listUsers","deleteUsers","UserList","history","dispatch","userList","state","loading","error","users","userLogin","userInfo","userDelete","successDelete","success","isAdmin","push","deleteHandler","id","window","confirm","float","marginBottom","map","user","_id","name","cropSelection","color","email"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport {\n    Table,\n    Button,\n    Container,\n} from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../..//../components/Message/Message'\nimport Loader from '../../../components/Loader/Loader'\nimport { listUsers, deleteUsers } from './../../../actions/userActions'\n\nconst UserList = ({ history }) => {\n\n    const dispatch = useDispatch()\n\n    const userList = useSelector(state => state.userList)\n    const { loading, error, users } = userList\n\n    const userLogin = useSelector(state => state.userLogin)\n    const { userInfo } = userLogin\n\n    const userDelete = useSelector(state => state.userDelete)\n    const { success: successDelete } = userDelete\n\n    useEffect(() => {\n        if (userInfo && userInfo.isAdmin) {\n            dispatch(listUsers())\n        } else {\n            history.push('/login')\n        }\n    }, [dispatch, history, successDelete, userInfo])\n\n    const deleteHandler = (id) => {\n        if (window.confirm('Are you sure')) {\n            dispatch(deleteUsers(id))\n        }\n    }\n\n    return (\n        <div>\n            <LinkContainer style={{ float: 'right' }} to='/register'>\n                <Button className=\"mr-3 mb-3\">ADD ADMIN</Button>\n            </LinkContainer>\n            <Container>\n                {loading ? <Loader />\n                    : error ? <Message variant='danger'>{error}</Message>\n                        : (\n                            <Table style={{ marginBottom: '223px' }} striped bordered hover responsive className='table-sm'>\n                                <thead>\n                                    <tr>\n                                        <td>ID</td>\n                                        <td>NAME</td>\n                                        <td>CROP SELECTION</td>\n                                        <td>EMAIL / NIC</td>\n                                        <td>ADMIN</td>\n                                        <td>EDIT / DELETE</td>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {\n                                        users.map(user => (\n                                            <tr key={user._id}>\n                                                <td>{user._id}</td>\n                                                <td>{user.name}</td>\n                                                {\n                                                    user.cropSelection\n                                                        ? <td>{user.cropSelection}</td>\n                                                        : <td style={{ color: 'red' }}>No Crop Selected</td>\n                                                }\n                                                <td><a href={`mailto:${user.email}`}>{user.email}</a></td>\n                                                <td>\n                                                    {\n                                                        user.isAdmin ? (\n                                                            <i className=\"fas fa-check\" style={{ color: 'green' }}></i>\n                                                        ) : <i className=\"fas fa-times\" style={{ color: 'red' }}></i>\n                                                    }\n                                                </td>\n                                                <td>\n                                                    <LinkContainer to={`/admin/user/${user._id}/edit`}>\n                                                        <Button variant=\"light\" className=\"btn btn-sm\">\n                                                            <i className=\"fas fa-edit\"></i>\n                                                        </Button>\n                                                    </LinkContainer>\n                                                    <Button\n                                                        variant=\"danger\"\n                                                        className=\"btn-sm mr-2\"\n                                                        onClick={() => deleteHandler(user._id)}\n                                                    >\n                                                        <i className=\"fas fa-trash-alt\"></i>\n                                                    </Button>\n                                                </td>\n                                            </tr>\n                                        ))\n                                    }\n                                </tbody>\n                            </Table>\n                        )\n                }\n            </Container>\n        </div>\n    )\n}\n\nexport default UserList\n"]},"metadata":{},"sourceType":"module"}