{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from'react';import{Container,Button,Row,Col,ListGroup,Image,Card}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import CheckoutSteps from'./../../components/CheckoutSteps/CheckoutSteps';import Message from'../../components/Message/Message';import{createOrder}from'./../../actions/orderAction';import Meta from'../Helmet/Meta';var PlaceOrder=function PlaceOrder(_ref){var history=_ref.history;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cartSeed;});// Calculate Price\nvar addDecimals=function addDecimals(num){return(Math.round(num*100)/100).toFixed(2);};cart.itemsPrice=cart.cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2);cart.shippingPrice=cart.itemsPrice>100?0:100;cart.taxPrice=addDecimals(Number(0.15*cart.itemsPrice).toFixed(2));cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice)).toFixed(2);var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,success=orderCreate.success,error=orderCreate.error;useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[history,success]);var placeOrder=function placeOrder(){dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'100px'},children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Meta,{title:\"ic | Order\"}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center\",children:/*#__PURE__*/_jsx(Col,{xs:12,md:6,children:/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",className:\"mb-3\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address : \"}),cart.shippingAddress.address,\", \",cart.shippingAddress.city,' ',cart.shippingAddress.postalCode,\",\",' ',cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method : \"}),cart.paymentMethod]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),cart.cartItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"Your cart is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:item.name}),/*#__PURE__*/_jsx(Col,{md:4,children:\"\".concat(item.qty,\" x RS. \").concat(item.price,\" = RS. \").concat(item.qty*item.price)})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items\"}),/*#__PURE__*/_jsx(Col,{children:\"RS. \".concat(cart.itemsPrice)})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping\"}),/*#__PURE__*/_jsx(Col,{children:\"RS. \".concat(cart.shippingPrice)})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax\"}),/*#__PURE__*/_jsx(Col,{children:\"RS. \".concat(cart.taxPrice)})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total\"}),/*#__PURE__*/_jsx(Col,{children:\"RS. \".concat(cart.totalPrice)})]})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[error&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cart.cartItems===0,onClick:placeOrder,children:\"Place Order\"})]})]})})})]})]})});};export default PlaceOrder;","map":{"version":3,"sources":["C:/Users/hasit/Desktop/Project new new/web-cw-main/web-cw-main/frontend/src/components/PlaceOrder/PlaceOrder.jsx"],"names":["React","useEffect","Container","Button","Row","Col","ListGroup","Image","Card","useDispatch","useSelector","CheckoutSteps","Message","createOrder","Meta","PlaceOrder","history","dispatch","cart","state","cartSeed","addDecimals","num","Math","round","toFixed","itemsPrice","cartItems","reduce","acc","item","qty","price","shippingPrice","taxPrice","Number","totalPrice","orderCreate","order","success","error","push","_id","placeOrder","orderItems","shippingAddress","paymentMethod","marginTop","address","city","postalCode","country","length","map","index","image","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport {\n    Container,\n    Button,\n    Row,\n    Col,\n    ListGroup,\n    Image,\n    Card\n} from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport CheckoutSteps from './../../components/CheckoutSteps/CheckoutSteps'\nimport Message from '../../components/Message/Message'\nimport { createOrder } from './../../actions/orderAction'\nimport Meta from '../Helmet/Meta'\n\nconst PlaceOrder = ({ history }) => {\n\n    const dispatch = useDispatch()\n\n    const cart = useSelector(state => state.cartSeed)\n\n    // Calculate Price\n    const addDecimals = num => {\n        return (Math.round(num * 100) / 100).toFixed(2)\n    }\n\n    cart.itemsPrice = cart.cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)\n    cart.shippingPrice = cart.itemsPrice > 100 ? 0 : 100\n    cart.taxPrice = addDecimals(Number(0.15 * cart.itemsPrice).toFixed(2))\n    cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice)).toFixed(2)\n\n    const orderCreate = useSelector(state => state.orderCreate)\n    const { order, success, error } = orderCreate\n\n    useEffect(() => {\n        if (success) {\n            history.push(`/order/${order._id}`)\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [history, success])\n\n    const placeOrder = () => {\n        dispatch(createOrder({\n            orderItems: cart.cartItems,\n            shippingAddress: cart.shippingAddress,\n            paymentMethod: cart.paymentMethod,\n            itemsPrice: cart.itemsPrice,\n            shippingPrice: cart.shippingPrice,\n            taxPrice: cart.taxPrice,\n            totalPrice: cart.totalPrice\n        }))\n    }\n\n    return (\n        <div style={{ marginTop: '100px' }}>\n            <Container>\n                <Meta\n                    title=\"ic | Order\"\n                />\n                <Row className=\"justify-content-md-center\">\n                    <Col xs={12} md={6}>\n                        <CheckoutSteps step1 step2 step3 step4 />\n                    </Col>\n                </Row>\n                <Row>\n                    <Col md={8}>\n                        <ListGroup variant='flush' className=\"mb-3\">\n                            <ListGroup.Item>\n                                <h1>Shipping</h1>\n                                <p>\n                                    <strong>Address : </strong>\n                                    {cart.shippingAddress.address}, {cart.shippingAddress.city}{' '}\n                                    {cart.shippingAddress.postalCode},{' '}\n                                    {cart.shippingAddress.country}\n                                </p>\n                            </ListGroup.Item>\n                            <ListGroup.Item>\n                                <h2>Payment Method</h2>\n                                <p>\n                                    <strong>Method : </strong>\n                                    {cart.paymentMethod}\n                                </p>\n                            </ListGroup.Item>\n                            <ListGroup.Item>\n                                <h2>Order Items</h2>\n                                {cart.cartItems.length === 0\n                                    ? <Message>Your cart is empty</Message>\n                                    : (\n                                        <ListGroup variant=\"flush\">\n                                            {\n                                                cart.cartItems.map((item, index) => (\n                                                    <ListGroup.Item key={index}>\n                                                        <Row>\n                                                            <Col md={1}>\n                                                                <Image src={item.image} alt={item.name} fluid rounded />\n                                                            </Col>\n                                                            <Col>\n                                                                {item.name}\n                                                            </Col>\n                                                            <Col md={4}>\n                                                                {`${item.qty} x RS. ${item.price} = RS. ${item.qty * item.price}`}\n                                                            </Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n                                                ))\n                                            }\n                                        </ListGroup>\n                                    )\n                                }\n                            </ListGroup.Item>\n                        </ListGroup>\n                    </Col>\n                    <Col md={4}>\n                        <Card>\n                            <ListGroup variant=\"flush\">\n                                <ListGroup.Item>\n                                    <h2>Order Summary</h2>\n                                </ListGroup.Item>\n                                <ListGroup.Item>\n                                    <Row>\n                                        <Col>Items</Col>\n                                        <Col>{`RS. ${cart.itemsPrice}`}</Col>\n                                    </Row>\n                                </ListGroup.Item>\n                                <ListGroup.Item>\n                                    <Row>\n                                        <Col>Shipping</Col>\n                                        <Col>{`RS. ${cart.shippingPrice}`}</Col>\n                                    </Row>\n                                </ListGroup.Item>\n                                <ListGroup.Item>\n                                    <Row>\n                                        <Col>Tax</Col>\n                                        <Col>{`RS. ${cart.taxPrice}`}</Col>\n                                    </Row>\n                                </ListGroup.Item><ListGroup.Item>\n                                    <Row>\n                                        <Col>Total</Col>\n                                        <Col>{`RS. ${cart.totalPrice}`}</Col>\n                                    </Row>\n                                </ListGroup.Item>\n                                <ListGroup.Item>\n                                    {error && <ListGroup.Item>\n                                        <Message variant=\"danger\">{error}</Message>\n                                    </ListGroup.Item>\n                                    }\n                                    <Button\n                                        type=\"button\"\n                                        className=\"btn-block\"\n                                        disabled={cart.cartItems === 0}\n                                        onClick={placeOrder}\n                                    >Place Order</Button>\n                                </ListGroup.Item>\n                            </ListGroup>\n                        </Card>\n                    </Col>\n                </Row>\n            </Container>\n        </div>\n    )\n}\n\nexport default PlaceOrder\n"]},"metadata":{},"sourceType":"module"}